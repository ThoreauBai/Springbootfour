<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<html xmlns:th="http://www.thymeleaf.org">
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Signin Template for Bootstrap</title>
    <!-- Bootstrap core CSS -->
    <link href="asserts/css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom styles for this template -->
    <link href="asserts/css/signin.css" rel="stylesheet">
</head>

<body class="text-center">
<!--dashboard.html-->
<form class="form-signin" action="" th:action="@{/pploginbyhtml}" method="put">
    <p style="color: red" th:text="${msg}"></p>
    <img class="mb-4" src="asserts/img/bootstrap-solid.svg" alt="" width="72" height="72">
    <h1 class="h3 mb-3 font-weight-normal" th:text="#{login.tip}">Please sign in</h1>
    <label class="sr-only"  th:text="#{login.username} ">Username</label>
    <input type="text" class="form-control" id="Username" placeholder="Username" required="" autofocus="">
    <label class="sr-only"  th:placeholder="#{login.password}">Password</label>
    <input type="password" class="form-control"id="Password" placeholder="Password" required="">
    <div class="checkbox mb-3">
        <label th:text="#{login.tip}"></label>
        <label>
            <input type="checkbox" value="remember-me" th:value="#{login.remember}"> 记住我
        </label>
    </div>
    <button class="btn btn-lg btn-primary btn-block" type="button"  id="btnAdd" onclick="submit()", th:text="#{login.btn}"></button>
    <p class="mt-5 mb-3 text-muted">© 2017-2018</p>
    <a class="btn btn-sm" th:href="@{/(l='zh_CN')}">中文</a>
    <a class="btn btn-sm" th:href="@{/(l='zh_US')}">English</a>
</form>
<script src="js/jquery-3.3.1.js" type="text/javascript" charset="utf-8"></script>
<!--相对路径-->
<script type="text/javascript" src="../js/jquery-1.9.1.js" type="text/javascript"></script>
<script type="text/javascript" src="js/jquery-1.9.1.js"></script>
<script type="text/javascript" src="js/common.js"></script>


</body>
<script type="text/javascript">
    var btnAdd = document.getElementById("btnAdd");
    btnAdd.onclick = function () {
        var result = document.getElementById("Username").value;
        var password = document.getElementById("Password").value;
        console.log('result' + result);
        console.log('password' + password);
        $.ajax({
            url: "/pploginbyhtml",
            type: "PUT",
            datatype: "json",
            data: {
                "username": result,
                "password": password,
            },
            success: function (res) {
                console.log("！！！！！" + res.toString())
                console.log("！！！！！" + res.code)
                console.log("！！！！！" +res.data.message)
                console.log("！！！！！" + JSON.stringify(res))
                console.log("！！！！！" + JSON.stringify(res).valueOf())
               var str_pretty1 = JSON.stringify(res)
                console.log("AAAAA" + JSON.parse(str_pretty1).data)
                var titledata=JSON.parse(str_pretty1).data;
                if (res.code === 0) {
                    console.log("！res" + res)
                    window.location.href = '/dashboard.html';
                }else if(res.code ===99){
                    alert(titledata)
                }
            }

        }).done.fail(function () {
            alert('请查看数据失败')
            const errlogger = log4js.getLogger('请查看数据失败')
        })
        if (result == "") {
            alert("用户名不能为空");
            return false;
        }
        if (password == "") {
            alert("密码不能为空");
            return false;
        } else {
            alert("成功");
            const errlogger = log4js.getLogger('"成功"')
            window.location.href = '/dashboard.html';
            return dashboard.html;
        }
    }

</script>

</html>


